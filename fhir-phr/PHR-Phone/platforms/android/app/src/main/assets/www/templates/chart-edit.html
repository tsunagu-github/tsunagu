<!--  グラフ管理メインメニュー　ここから各機能へ遷移する　-->

<ons-page ng-controller="chartEdit" ng-init="startChartEdit();">       
    <ons-toolbar style="background: #69BB7B">
        <div class="left"><ons-back-button style="font-size: smaller;">{{backText}}</ons-back-button></div>
        <div class="center" style="color: #fff">グラフ定義</div>
        <div class="right">
            <ons-toolbar-button ng-click="app.slidingMenu.toggleMenu()"><ons-icon icon="bars" style="color: #fff"></ons-icon></ons-toolbar-button>
        </div>
    </ons-toolbar>
    <br>
    <ons-button-bar style="margin-left:10px;">
        <input type="checkbox" id="2" ng-checked="editChart.checkFlg[0] == true" ng-click="checkAction(2)" />
        <label>自己測定</label>
        <input type="checkbox" id="1" ng-checked="editChart.checkFlg[1] == true" ng-click="checkAction(1)" />
        <label>自己管理</label>
        <input type="checkbox" id="3" ng-checked="editChart.checkFlg[2] == true" ng-click="checkAction(3)" />
        <label>健診項目</label>
        <input type="checkbox" id="8" ng-checked="editChart.checkFlg[3] == true" ng-click="checkAction(8)" />
        <label>その他</label>
        <!--
        <div class="center" style="float:left;">
            <button class="button-bar__button" style="font-size: 15px;{{typeColor2}}" ng-click="createDefinition(editChart.chartDefinitionId, 2, false)">　自己測定　</button>
        </div>
        <div class="center" style="float:left;">
            <button class="button-bar__button" style="font-size: 15px;{{typeColor1}}" ng-click="createDefinition(editChart.chartDefinitionId, 1, false)">　検査項目　</button>
        </div>
        <div class="center" style="float:left;">
            <button class="button-bar__button" style="font-size: 15px;{{typeColor3}}" ng-click="createDefinition(editChart.chartDefinitionId, 3, false)">　健診項目　</button>
        </div>
        -->
    </ons-button-bar>
    <br>
    <br>
    <form name="phrForm" novalidate>
        <ons-list style="clear:both;">
            <ons-list-item>
                <ons-row>
                    <ons-col width="100px" align="left">定義名称：</ons-col>
                    <ons-col align="left">
                        <ons-input type="text" name="chartName" ng-model="editChart.chartDefinitionName"  style="border-bottom: 1px solid #ccc;" placeholder="グラフ定義名称" ng-maxlength="20" ng-required="true" ></ons-input>
                        <span ng-show="phrForm.chartName.$error.maxlength" style="color:red;font-size:smaller;"><br>20文字以内で入力してください</span>
                        <span ng-show="phrForm.chartName.$error.required" style="color:red;font-size:smaller;"><br>入力してください</span>
                     </ons-col>
                </ons-row>
             </ons-list-item>          
            <ons-list-item>
                 <ons-row>
                    <ons-col width="100px" align="left">表示回数：</ons-col>
                    <ons-col align="left">
                        <ons-input type="number" name="viewCount" ng-model="editChart.viewCount" style="border-bottom: 1px solid #ccc;width:55px;" placeholder=""  ng-required="true" min=2 max=999 ></ons-input>
                        <span ng-show="phrForm.viewCount.$error.required" style="color:red;font-size:smaller;"><br>入力してください</span>
                        <span ng-show="phrForm.viewCount.$error.min" style="color:red;font-size:smaller;"><br/>2以上の数字を入力してください。</span>
                        <span ng-show="phrForm.viewCount.$error.max" style="color:red;font-size:smaller;"><br/>999以下の数字を入力してください。</span>
                    </ons-col>
                </ons-row>
            </ons-list-item>          
        </ons-list>
        <br>
        <ons-list style="clear:both;">
            <ons-list-item style="background-color: #add8e6;">
               <ons-row>
                    <ons-col align="left"><div class="center" style="float:left;">検査項目</div></ons-col>
                    <ons-col width="60px"  align="center"><div >線色</div></ons-col>
                    <ons-col width="60px"  align="center"><div >選択</div></ons-col>
                </ons-row>
            </ons-list-item>
            <ons-list-item ng-repeat="def in editChart.chartObservationList" >
                <ons-row>
                    <ons-col align="left"><div style="margin-top:5px; ">{{def.observationDefinitionName}}</div></ons-col>
                    <ons-col width="60px" align="center">
                        <select style="margin-top:5px; font-size:medium;" ng-model="def.lineColor">
                            <option value=""></option>
                            <option ng-repeat="c in colorList" value="{{c.cd}}" ng-style="{color:c.cd}">{{c.val}}</option>  
                        </select>                        
                    </ons-col>
                    <ons-col width="60px"  align="center">
                    <label class="switch">
                        <input type="checkbox" ng-checked="def.selected" ng-model="def.selected">
                        <div class="switch__toggle"><div class="switch__handle"></div></div>
                    </label>
                    </ons-col>
               </ons-row>
            </ons-list-item>           
        </ons-list>
        <div id="chartId" style="display: none;">{{editChart.chartDefinitionId}}</div>
    </form>
    <ons-bottom-toolbar style="height: 3.4rem;">
        <div style="float: left; width: 50%">
            <ons-toolbar-button ng-click="deleteChart( )" style="color: darkslategrey; display: {{showDelBt}}; flex: 1 1 0; flex-direction: column; justify-content: center; position: relative; text-align: center; text-overflow: ellipsis; white-space: nowrap;height: 2.8rem; line-height: 2.6rem;">
                <ons-icon icon="fa-trash" size="30px" style="align-self: center; max-width: 100%;"></ons-icon>
                <span style="align-self: center; max-width: 100%;min-width: 35px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap; font-size: 16px; line-height: 16px">削除
                </span>
            </ons-toolbar-button>
        </div>
        <div style="float: right; width: 50%">
            <ons-toolbar-button ng-click="entryChart()" ng-disabled="phrForm.$invalid" style="color: darkslategrey; display: {{showEditBt}}; flex: 1 1 0; flex-direction: column; justify-content: center; position: relative; text-align: center; text-overflow: ellipsis; white-space: nowrap;height: 2.8rem; line-height: 2.6rem;">
                <ons-icon icon="fa-pencil" size="30px" style="align-self: center; max-width: 100%;"></ons-icon>
                <span style="align-self: center; max-width: 100%;min-width: 35px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap; font-size: 16px; line-height: 16px">登録</span>
            </ons-toolbar-button>
        </div>
    </ons-bottom-toolbar>

</ons-page>
